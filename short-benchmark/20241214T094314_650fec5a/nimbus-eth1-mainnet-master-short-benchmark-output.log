2024-12-14 07:56:15 - >>> starting cleanBenchmarkDir() inside benchmarks-cleanup.sh
Removing blocks-import-benchmark.csv
/
2024-12-14 07:56:15 - >>> completed cleanBenchmarkDir()
2024-12-14 07:56:15 - >>> starting cloneOrFetchRepo() inside build-and-update-nimbus.sh
2024-12-14 07:56:15 - >>> cleaning repo
2024-12-14 07:56:15 - git clean -fdx > /dev/null 2>&1
2024-12-14 07:56:15 - git submodule foreach --recursive git clean -fdx > /dev/null 2>&1
2024-12-14 07:56:23 - >>> Fetching latest changes...
HEAD is now at 650fec5a Wire ForkedChainRef to graphql and rpc_utils (#2936)
2024-12-14 07:56:23 - >>> completed cloneOrFetchRepo()
2024-12-14 07:56:23 - >>> starting buildBinaries()
2024-12-14 07:56:23 - >>> Building binaries...
2024-12-14 07:56:23 - >>> make -j16 update
[92mBuilding:[39m Nim compiler
2024-12-14 07:58:14 - >>> make -j16 nimbus_execution_client LOG_LEVEL=DEBUG NIMFLAGS=-d:chronicles_colors=none -d:disableMarchNative
[92mBuilding:[39m install/usr/lib/libbacktrace.a
make[1]: Entering directory '/home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/vendor/nim-rocksdb/vendor/rocksdb'
$DEBUG_LEVEL is 0, $LIB_MODE is static
make[1]: Leaving directory '/home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/vendor/nim-rocksdb/vendor/rocksdb'
Cleaning up RocksDb build artifacts.
/bin/sh: 1: javac: not found
Building RocksDb static libraries.
[92mBuilding:[39m install/usr/lib/libbacktracenim.a
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  1 2330k    1 39754    0     0  60548      0  0:00:39 --:--:--  0:00:39 60548  2  345k    2 10236    0     0  14180      0  0:00:24 --:--:--  0:00:24 14180100 2330k  100 2330k    0     0  2572k      0 --:--:-- --:--:-- --:--:-- 9203k
100  345k  100  345k    0     0   326k      0  0:00:01  0:00:01 --:--:--  996k
/usr/bin/ar: creating unity.a
[92mBuilding:[39m build/nimbus_execution_client
/home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/nimbus/compile_info.nim(34, 10) Warning: *** Compiling with nimvm enabled [User]
/home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/nimbus/evm/precompiles.nim(350, 26) Warning: toBytesBE; toBytes is deprecated [Deprecated]
/home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/nimbus/evm/precompiles.nim(368, 28) Warning: toBytesBE; toBytes is deprecated [Deprecated]
/home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/nimbus/graphql/ethapi.nim(325, 14) Warning: LedgerRef does not support loading a particular state; getStateDB is deprecated [Deprecated]
2024-12-14 08:03:15 - >>> renaming binaries to match commit they were built from
2024-12-14 08:03:15 - mv build/nimbus_execution_client build/nimbus_execution_client_650fec5a
2024-12-14 08:03:15 - creating a symbolic link to the latest version
2024-12-14 08:03:15 - ln -frs build/nimbus_execution_client_650fec5a build/nimbus_execution_client
2024-12-14 08:03:15 - deleting copies that are older than N days
2024-12-14 08:03:15 - find build -mtime +3 -exec rm '{}' \+
2024-12-14 08:03:15 - >>> buildBinaries() complete
2024-12-14 08:03:15 - skip copyTemplateDatabase() if we have already executed benchmarking for the commit 650fec5a
2024-12-14 08:03:15 - find /home/data/nimbus-eth1-benchmarks/short-benchmark -type d -name *650fec5a* 2>/dev/null | wc -l
2024-12-14 08:03:15 - BENCHMARK_EXISTS=15
2024-12-14 08:03:15 - >>> starting copyTemplateDatabase()
2024-12-14 08:03:15 - mkdir -p /home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/data/shared_mainnet_0
2024-12-14 08:03:15 - >>> Copying template db into nimbus data directory
2024-12-14 08:03:15 - cp -r /data/template-db/. /home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/data/shared_mainnet_0/
2024-12-14 08:09:08 - >>> Template db copied
2024-12-14 08:09:08 - chown -R nimbus:staff /home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/data/shared_mainnet_0
2024-12-14 08:09:08 - >>> completed copyTemplateDatabase()
2024-12-14 08:09:08 - >>> starting cloneOrFetchRepo() inside fetch-benchmarks.sh
2024-12-14 08:09:08 - >>> creating directory /home/data/nimbus-eth1-benchmarks
2024-12-14 08:09:08 - >>> Fetching latest benchmarks from github
HEAD is now at eb61677 benchmark: publish metrics and report
2024-12-14 08:09:10 - >>> completed cloneOrFetchRepo()
INF 2024-12-14 08:09:10.660+00:00 Launching execution client                 version=v0.1.0-650fec5a conf="(dataDir: /home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/data/shared_mainnet_0, era1DirOpt: some(/data/era1), eraDirOpt: some(/data/era), keyStore: /home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/data/shared_mainnet_0/keystore, chainDbMode: Aristo, importKey: , evm: \"\", trustedSetupFile: none(string), extraData: \"nimbus-eth1/v0.1.0-650fec5a\", gasLimit: 30000000, network: \"mainnet\", customNetwork: none(NetworkParams), networkId: 1, networkParams: (config: ..., genesis: ...), logLevel: INFO, logFile: none(OutFile), logMetricsEnabled: false, logMetricsInterval: 10, metricsEnabled: false, metricsPort: 9093, metricsAddress: 127.0.0.1, bootstrapNodes: @[], bootstrapFile: , bootstrapEnrs: @[], staticPeers: @[], staticPeersFile: , staticPeersEnrs: @[], reconnectMaxRetry: 0, reconnectInterval: 15, listenAddress: ::, tcpPort: 30303, udpPort: 0, maxPeers: 25, nat: (hasExtIp: false, nat: NatAny), discovery: V4, netKey: \"random\", agentString: \"nimbus-eth1/v0.1.0-650fec5a/linux-amd64/Nim-2.0.12/nimvm\", numThreads: 0, beaconChunkSize: 0, rocksdbMaxOpenFiles: 2048, rocksdbWriteBufferSize: 67108864, rocksdbRowCacheSize: 0, rocksdbBlockCacheSize: 2684354560, rdbVtxCacheSize: 536870912, rdbKeyCacheSize: 268435456, rdbBranchCacheSize: 1073741824, rdbPrintStats: false, cmd: import, maxBlocks: 1000000, chunkSize: 8192, csvStats: some(\"/home/data/nimbus-eth1-benchmarks/blocks-import-benchmark.csv\"), fullValidation: false, noValidation: true, storeBodies: false, storeReceipts: false, storeSlotHashes: false)"
INF 2024-12-14 08:09:51.975+00:00 Threadpool started                         numThreads=16
INF 2024-12-14 08:09:52.079+00:00 Database initialized                       base="(0xd24fd73f794058a3807db926d8898c6481e902b7edb91ce0d479d6760f276183, 20000000)" finalized="(0xd24fd73f794058a3807db926d8898c6481e902b7edb91ce0d479d6760f276183, 20000000)" head="(0xd24fd73f794058a3807db926d8898c6481e902b7edb91ce0d479d6760f276183, 20000000)"
NTC 2024-12-14 08:09:52.079+00:00 Importing era archive                      blockNumber=20000001 dataDir=/home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/data/shared_mainnet_0 eraDir=/data/era
NTC 2024-12-14 08:09:53.687+00:00 Resuming import from                       importedSlot=9204783
INF 2024-12-14 08:16:36.087+00:00 Imported blocks                            blockNumber=20008193 blocks=8192 importedSlot=9213020 txs=1226966 mgas=124237.538 bps=20.737 tps=3105.836 mgps=314.484 avgBps=20.297 avgTps=3039.978 avgMGps=307.816 elapsed=6m43s610ms
INF 2024-12-14 08:22:56.872+00:00 Imported blocks                            blockNumber=20016385 blocks=16384 importedSlot=9221256 txs=2540380 mgas=248071.121 bps=21.949 tps=3519.010 mgps=331.785 avgBps=20.888 avgTps=3238.737 avgMGps=316.267 elapsed=13m4s373ms
INF 2024-12-14 08:29:18.997+00:00 Imported blocks                            blockNumber=20024577 blocks=24576 importedSlot=9229485 txs=3869398 mgas=372018.870 bps=21.884 tps=3550.248 mgps=331.106 avgBps=21.068 avgTps=3317.116 avgMGps=318.920 elapsed=19m26s494ms
INF 2024-12-14 08:34:59.439+00:00 Imported blocks                            blockNumber=20032769 blocks=32768 importedSlot=9237722 txs=5222766 mgas=495797.661 bps=24.630 tps=4069.095 mgps=372.159 avgBps=21.744 avgTps=3465.743 avgMGps=329.003 elapsed=25m6s968ms
INF 2024-12-14 08:40:40.320+00:00 Imported blocks                            blockNumber=20040961 blocks=40960 importedSlot=9245957 txs=6566802 mgas=619586.154 bps=24.602 tps=4036.294 mgps=371.751 avgBps=22.167 avgTps=3553.787 avgMGps=335.304 elapsed=30m47s832ms
INF 2024-12-14 08:46:36.722+00:00 Imported blocks                            blockNumber=20049153 blocks=49152 importedSlot=9254196 txs=7904746 mgas=743522.989 bps=23.515 tps=3840.615 mgps=355.765 avgBps=22.300 avgTps=3586.294 avgMGps=337.328 elapsed=36m44s154ms
INF 2024-12-14 08:52:28.832+00:00 Imported blocks                            blockNumber=20057345 blocks=57344 importedSlot=9262435 txs=9212009 mgas=867360.393 bps=23.798 tps=3797.584 mgps=359.746 avgBps=22.433 avgTps=3603.698 avgMGps=339.308 elapsed=42m36s265ms
INF 2024-12-14 08:57:47.394+00:00 Imported blocks                            blockNumber=20065537 blocks=65536 importedSlot=9270674 txs=10559018 mgas=991371.020 bps=26.385 tps=4338.499 mgps=399.418 avgBps=22.796 avgTps=3672.842 avgMGps=344.838 elapsed=47m54s890ms
INF 2024-12-14 09:03:07.796+00:00 Imported blocks                            blockNumber=20073729 blocks=73728 importedSlot=9278910 txs=11898676 mgas=1115111.252 bps=26.231 tps=4289.539 mgps=396.212 avgBps=23.074 avgTps=3723.785 avgMGps=348.983 elapsed=53m15s317ms
INF 2024-12-14 09:08:10.498+00:00 Imported blocks                            blockNumber=20081921 blocks=81920 importedSlot=9287152 txs=13323263 mgas=1239150.991 bps=27.841 tps=4841.516 mgps=421.554 avgBps=23.419 avgTps=3808.813 avgMGps=354.245 elapsed=58m18s8ms
INF 2024-12-14 09:13:20.136+00:00 Imported blocks                            blockNumber=20090113 blocks=90112 importedSlot=9295408 txs=14697082 mgas=1363113.760 bps=27.187 tps=4559.289 mgps=411.395 avgBps=23.666 avgTps=3859.948 avgMGps=358.000 elapsed=1h3m27s
INF 2024-12-14 09:18:42.434+00:00 Imported blocks                            blockNumber=20098305 blocks=98304 importedSlot=9303658 txs=16025683 mgas=1487146.987 bps=26.067 tps=4227.693 mgps=394.682 avgBps=23.803 avgTps=3880.442 avgMGps=360.096 elapsed=1h8m49s
INF 2024-12-14 09:24:21.032+00:00 Imported blocks                            blockNumber=20106497 blocks=106496 importedSlot=9311895 txs=17337157 mgas=1611066.441 bps=24.784 tps=3967.781 mgps=374.910 avgBps=23.833 avgTps=3879.927 avgMGps=360.545 elapsed=1h14m28s
INF 2024-12-14 09:29:43.614+00:00 Imported blocks                            blockNumber=20114689 blocks=114688 importedSlot=9320146 txs=18632097 mgas=1735123.234 bps=26.053 tps=4118.369 mgps=394.545 avgBps=23.938 avgTps=3888.934 avgMGps=362.159 elapsed=1h19m51s
INF 2024-12-14 09:34:51.020+00:00 Imported blocks                            blockNumber=20122881 blocks=122880 importedSlot=9328409 txs=19937418 mgas=1859249.574 bps=27.386 tps=4363.759 mgps=414.961 avgBps=24.101 avgTps=3910.431 avgMGps=364.664 elapsed=1h24m58s
INF 2024-12-14 09:39:53.730+00:00 Imported blocks                            blockNumber=20131073 blocks=131072 importedSlot=9336660 txs=21214129 mgas=1983500.452 bps=27.812 tps=4334.407 mgps=421.829 avgBps=24.267 avgTps=3927.651 avgMGps=367.232 elapsed=1h30m1s
2024-12-14 09:43:14 - >>> starting moveBenchmarkingFileToRepo() inside publish-metrics-github.sh
2024-12-14 09:43:14 - >>> creating directory /home/data/nimbus-eth1-benchmarks/short-benchmark/20241214T094314_650fec5a
2024-12-14 09:43:14 - >>> copying debug-csv generated by nimbus to benchmarks repo
2024-12-14 09:43:14 - cp /home/data/nimbus-eth1-benchmarks/blocks-import-benchmark.csv /home/data/nimbus-eth1-benchmarks/short-benchmark/20241214T094314_650fec5a/blocks-import-benchmark.csv
2024-12-14 09:43:14 - >>> completed moveBenchmarkingFileToRepo()
2024-12-14 09:43:15 - >>> copying import systemd service log file to benchmarks repo
2024-12-14 09:43:15 - cp /home/data/nimbus-eth1-mainnet-master-short-benchmark-output.log /home/data/nimbus-eth1-benchmarks/short-benchmark/20241214T094314_650fec5a/nimbus-eth1-mainnet-master-short-benchmark-output.log
2024-12-14 09:43:15 - >>> truncating import systemd service log file
2024-12-14 09:43:15 - cat /dev/null > /home/data/nimbus-eth1-mainnet-master-short-benchmark-output.log
