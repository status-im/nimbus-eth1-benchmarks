[master 9b6b1a0] debug: publish metrics and report for 5000 blocks
 3 files changed, 78 insertions(+)
 create mode 100644 short-benchmark/20241211T061415_a38f8f6f/blocks-import-benchmark.csv
 create mode 100644 short-benchmark/20241211T061415_a38f8f6f/build-environment.log
 create mode 100644 short-benchmark/20241211T061415_a38f8f6f/nimbus-eth1-mainnet-master-short-benchmark-output.log
To github.com:status-im/nimbus-eth1-benchmarks.git
   3349d0c..9b6b1a0  master -> master
2024-12-11 06:15:17 - >>> starting cloneOrFetchRepo() inside build-and-update-nimbus.sh
2024-12-11 06:15:17 - >>> Fetching latest changes...
From https://github.com/status-im/nimbus-eth1
   a38f8f6f..37dee1d9  master     -> origin/master
HEAD is now at 37dee1d9 rm macOS amd64 builds from CI/releases (#2921)
2024-12-11 06:15:18 - >>> completed cloneOrFetchRepo()
2024-12-11 06:15:18 - >>> starting buildBinaries()
2024-12-11 06:15:18 - >>> Building binaries...
make[1]: Entering directory '/home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/vendor/nim-rocksdb/vendor/rocksdb'
$DEBUG_LEVEL is 0, $LIB_MODE is static
[92mBuilding:[39m install/usr/lib/libbacktracenim.a
make[1]: Leaving directory '/home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/vendor/nim-rocksdb/vendor/rocksdb'
Cleaning up RocksDb build artifacts.
find: â€˜./lz4-1.9.4â€™: No such file or directory
find: â€˜./zstd-1.5.5â€™: No such file or directory
make[1]: *** [Makefile:1253: clean-rocks] Error 1
Building RocksDb static libraries.
    %%  TToottaall        % %R eRceecievievde d%  %X fXefredr d  A vAevreargaeg eS pSepeede d    T iTmiem e      T iTmiem e        T iTmiem e  C uCrurrernetn
t 
                                                                D lDolaodad    UUppllooaadd      TToottaall      SSppeenntt        LLeefftt    SSppeeeedd

    00          00        00          00        00          00            00            00  ----::----::----  ----::----::----  ----::----::----          00  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0 2330k    0 12833    0     0  21915      0  0:01:48 --:--:--  0:01:48 21915 12  345k   12 45015    0     0  76763      0  0:00:04 --:--:--  0:00:04 76763100  345k  100  345k    0     0   511k      0 --:--:-- --:--:-- --:--:-- 3353k
100 2330k  100 2330k    0     0  2891k      0 --:--:-- --:--:-- --:--:-- 10.2M
/usr/bin/ar: creating unity.a
[92mBuilding:[39m build/nimbus_execution_client
/home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/nimbus/compile_info.nim(34, 10) Warning: *** Compiling with nimvm enabled [User]
/home/data/nimbus-eth1-mainnet-master-short-benchmark/repo/nimbus/graphql/ethapi.nim(323, 14) Warning: LedgerRef does not support loading a particular state; getStateDB is deprecated [Deprecated]
The nimbus target is deprecated and will soon change meaning, use 'nimbus_execution_client' instead
2024-12-11 06:20:52 - >>> buildBinaries() complete
2024-12-11 06:20:52 - >>> starting cleanBenchmarkDir() inside database-generation-and-cleanup.sh
Removing blocks-import-benchmark.csv
/
2024-12-11 06:20:52 - >>> completed cleanBenchmarkDir()
2024-12-11 06:20:52 - >>> starting regenerateNimbusDatabaseFromTemplate()
2024-12-11 06:20:52 - >>> Cleaning up existing database files with rm -rf /home/data/nimbus-eth1-mainnet-master-short-benchmark/data/shared_mainnet_0/nimbus/aristo/*
2024-12-11 06:20:52 - >>> Creating /home/data/nimbus-eth1-mainnet-master-short-benchmark/data/shared_mainnet_0/nimbus/aristo with permissions
2024-12-11 06:20:52 - >>> Copying template db into nimbus data directory
2024-12-11 06:24:31 - >>> Template db copied
2024-12-11 06:24:31 - >>> completed regenerateNimbusDatabaseFromTemplate()
2024-12-11 06:24:31 - >>> starting cloneOrFetchRepo() inside fetch-benchmarks.sh
2024-12-11 06:24:31 - >>> creating directory /home/data/nimbus-eth1-benchmarks
2024-12-11 06:24:31 - >>> Fetching latest benchmarks from github
HEAD is now at 9b6b1a0 debug: publish metrics and report for 5000 blocks
2024-12-11 06:24:33 - >>> completed cloneOrFetchRepo()
INF 2024-12-11 06:24:33.235+00:00 Launching execution client                 version=v0.1.0-37dee1d9 conf="(dataDir: /home/data/nimbus-eth1-mainnet-master-short-benchmark/data/shared_mainnet_0, era1DirOpt: some(/data/era1), eraDirOpt: some(/data/era), keyStore: /home/data/nimbus-eth1-mainnet-master-short-benchmark/data/shared_mainnet_0/keystore, chainDbMode: Aristo, importKey: , verifyFrom: none(uint64), evm: \"\", trustedSetupFile: none(string), extraData: \"nimbus-eth1/v0.1.0-37dee1d9\", network: \"mainnet\", customNetwork: none(NetworkParams), networkId: 1, networkParams: (config: ..., genesis: ...), logLevel: INFO, logFile: none(OutFile), logMetricsEnabled: false, logMetricsInterval: 10, metricsEnabled: false, metricsPort: 9093, metricsAddress: 127.0.0.1, bootstrapNodes: @[], bootstrapFile: , bootstrapEnrs: @[], staticPeers: @[], staticPeersFile: , staticPeersEnrs: @[], reconnectMaxRetry: 0, reconnectInterval: 15, listenAddress: ::, tcpPort: 30303, udpPort: 0, maxPeers: 25, nat: (hasExtIp: false, nat: NatAny), discovery: V4, netKey: \"random\", agentString: \"nimbus-eth1/v0.1.0-37dee1d9/linux-amd64/Nim-2.0.12/nimvm\", beaconChunkSize: 0, rocksdbMaxOpenFiles: 2048, rocksdbWriteBufferSize: 67108864, rocksdbRowCacheSize: 0, rocksdbBlockCacheSize: 2684354560, rdbKeyCacheSize: 268435456, rdbVtxCacheSize: 805306368, rdbPrintStats: false, cmd: import, maxBlocks: 5000, chunkSize: 8192, csvStats: some(\"/home/data/nimbus-eth1-benchmarks/blocks-import-benchmark.csv\"), fullValidation: false, noValidation: true, storeBodies: false, storeReceipts: false, storeSlotHashes: false)"
INF 2024-12-11 06:24:44.223+00:00 Database initialized                       base="(0x9eb1f8eb278c0a5db7c78dee870626f15d9b5679fd5c19334524072ef8fba585, 20010000)" finalized="(0x9eb1f8eb278c0a5db7c78dee870626f15d9b5679fd5c19334524072ef8fba585, 20010000)" head="(0x9eb1f8eb278c0a5db7c78dee870626f15d9b5679fd5c19334524072ef8fba585, 20010000)"
NTC 2024-12-11 06:24:44.223+00:00 Importing era archive                      blockNumber=20010001 dataDir=/home/data/nimbus-eth1-mainnet-master-short-benchmark/data/shared_mainnet_0 eraDir=/data/era
NTC 2024-12-11 06:24:45.855+00:00 Resuming import from                       importedSlot=9214836
WRN 2024-12-11 06:24:50.963+00:00 LedgerRef getCode()                        codeHash=0xdfcbac6f376de67ac09e2e0a0315e39042b4feff4c5d740ffdb7960fb1746e8a error="KvtNotFound(Kvt, ctx=get, error=GetNotFound)"
ERR 2024-12-11 06:24:51.731+00:00 Failed to persist blocks                   error="Error processing tx with index 19:invalid tx: account nonce mismatch. txNonce=143, accNonce=141"
2024-12-11 06:24:52 - >>> starting moveBenchmarkingFileToRepo() inside publish-metrics-github.sh
2024-12-11 06:24:52 - >>> creating directory /home/data/nimbus-eth1-benchmarks/short-benchmark/20241211T062452_37dee1d9
2024-12-11 06:24:52 - >>> copying debug-csv generated by nimbus to benchmarks repo
2024-12-11 06:24:52 - cp /home/data/nimbus-eth1-benchmarks/blocks-import-benchmark.csv /home/data/nimbus-eth1-benchmarks/short-benchmark/20241211T062452_37dee1d9/blocks-import-benchmark.csv
2024-12-11 06:24:52 - >>> completed moveBenchmarkingFileToRepo()
2024-12-11 06:25:53 - >>> starting cloneOrFetchRepo() inside build-and-update-nimbus.sh
2024-12-11 06:25:53 - >>> Fetching latest changes...
HEAD is now at 37dee1d9 rm macOS amd64 builds from CI/releases (#2921)
2024-12-11 06:25:53 - >>> completed cloneOrFetchRepo()
2024-12-11 06:25:53 - >>> starting buildBinaries()
2024-12-11 06:25:53 - >>> Binaries already exist for commit 37dee1d9, no need to build a new nimbus binary!
2024-12-11 06:25:53 - >>> starting cleanBenchmarkDir() inside database-generation-and-cleanup.sh
Removing blocks-import-benchmark.csv
Removing short-benchmark/20241211T062452_37dee1d9/
/
2024-12-11 06:25:53 - >>> completed cleanBenchmarkDir()
2024-12-11 06:25:53 - >>> starting regenerateNimbusDatabaseFromTemplate()
2024-12-11 06:25:53 - >>> Cleaning up existing database files with rm -rf /home/data/nimbus-eth1-mainnet-master-short-benchmark/data/shared_mainnet_0/nimbus/aristo/*
2024-12-11 06:25:53 - >>> Creating /home/data/nimbus-eth1-mainnet-master-short-benchmark/data/shared_mainnet_0/nimbus/aristo with permissions
2024-12-11 06:25:53 - >>> Copying template db into nimbus data directory
2024-12-11 06:29:13 - >>> Template db copied
2024-12-11 06:29:13 - >>> completed regenerateNimbusDatabaseFromTemplate()
2024-12-11 06:29:13 - >>> starting cloneOrFetchRepo() inside fetch-benchmarks.sh
2024-12-11 06:29:13 - >>> creating directory /home/data/nimbus-eth1-benchmarks
2024-12-11 06:29:13 - >>> Fetching latest benchmarks from github
HEAD is now at 9b6b1a0 debug: publish metrics and report for 5000 blocks
2024-12-11 06:29:14 - >>> completed cloneOrFetchRepo()
INF 2024-12-11 06:29:14.654+00:00 Launching execution client                 version=v0.1.0-37dee1d9 conf="(dataDir: /home/data/nimbus-eth1-mainnet-master-short-benchmark/data/shared_mainnet_0, era1DirOpt: some(/data/era1), eraDirOpt: some(/data/era), keyStore: /home/data/nimbus-eth1-mainnet-master-short-benchmark/data/shared_mainnet_0/keystore, chainDbMode: Aristo, importKey: , verifyFrom: none(uint64), evm: \"\", trustedSetupFile: none(string), extraData: \"nimbus-eth1/v0.1.0-37dee1d9\", network: \"mainnet\", customNetwork: none(NetworkParams), networkId: 1, networkParams: (config: ..., genesis: ...), logLevel: INFO, logFile: none(OutFile), logMetricsEnabled: false, logMetricsInterval: 10, metricsEnabled: false, metricsPort: 9093, metricsAddress: 127.0.0.1, bootstrapNodes: @[], bootstrapFile: , bootstrapEnrs: @[], staticPeers: @[], staticPeersFile: , staticPeersEnrs: @[], reconnectMaxRetry: 0, reconnectInterval: 15, listenAddress: ::, tcpPort: 30303, udpPort: 0, maxPeers: 25, nat: (hasExtIp: false, nat: NatAny), discovery: V4, netKey: \"random\", agentString: \"nimbus-eth1/v0.1.0-37dee1d9/linux-amd64/Nim-2.0.12/nimvm\", beaconChunkSize: 0, rocksdbMaxOpenFiles: 2048, rocksdbWriteBufferSize: 67108864, rocksdbRowCacheSize: 0, rocksdbBlockCacheSize: 2684354560, rdbKeyCacheSize: 268435456, rdbVtxCacheSize: 805306368, rdbPrintStats: false, cmd: import, maxBlocks: 5000, chunkSize: 8192, csvStats: some(\"/home/data/nimbus-eth1-benchmarks/blocks-import-benchmark.csv\"), fullValidation: false, noValidation: true, storeBodies: false, storeReceipts: false, storeSlotHashes: false)"
INF 2024-12-11 06:29:17.154+00:00 Database initialized                       base="(0xd24fd73f794058a3807db926d8898c6481e902b7edb91ce0d479d6760f276183, 20000000)" finalized="(0xd24fd73f794058a3807db926d8898c6481e902b7edb91ce0d479d6760f276183, 20000000)" head="(0xd24fd73f794058a3807db926d8898c6481e902b7edb91ce0d479d6760f276183, 20000000)"
NTC 2024-12-11 06:29:17.154+00:00 Importing era archive                      blockNumber=20000001 dataDir=/home/data/nimbus-eth1-mainnet-master-short-benchmark/data/shared_mainnet_0 eraDir=/data/era
NTC 2024-12-11 06:29:18.722+00:00 Resuming import from                       importedSlot=9204783
INF 2024-12-11 06:33:19.841+00:00 Imported blocks                            blockNumber=20005001 blocks=5000 importedSlot=9209812 txs=736412 mgas=75927.329 bps=21.119 tps=3110.511 mgps=320.707 avgBps=20.614 avgTps=3036.106 avgMGps=313.036 elapsed=4m2s551ms
2024-12-11 06:33:20 - >>> starting moveBenchmarkingFileToRepo() inside publish-metrics-github.sh
2024-12-11 06:33:20 - >>> creating directory /home/data/nimbus-eth1-benchmarks/short-benchmark/20241211T063320_37dee1d9
2024-12-11 06:33:20 - >>> copying debug-csv generated by nimbus to benchmarks repo
2024-12-11 06:33:20 - cp /home/data/nimbus-eth1-benchmarks/blocks-import-benchmark.csv /home/data/nimbus-eth1-benchmarks/short-benchmark/20241211T063320_37dee1d9/blocks-import-benchmark.csv
2024-12-11 06:33:20 - >>> completed moveBenchmarkingFileToRepo()
